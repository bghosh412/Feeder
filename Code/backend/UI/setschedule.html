<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><title>Set Feeding Schedule</title><link rel="stylesheet" href="css/styles.css"></head><body><script>let dayMap={Monday:"mon",Tuesday:"tue",Wednesday:"wed",Thursday:"thu",Friday:"fri",Saturday:"sat",Sunday:"sun"};window.addEventListener("DOMContentLoaded",function(){fetch("/api/schedule").then(e=>e.json()).then(d=>{console.log("Loaded schedule:",d),d.feeding_times&&d.days&&(d.feeding_times.forEach((e,t)=>{document.getElementById(`ft${t+1}_chk`).checked=e.enabled,document.getElementById(`ft${t+1}_hr`).value=e.hour,document.getElementById(`ft${t+1}_min`).value=e.minute,document.getElementById(`ft${t+1}_ampm`).value=e.ampm}),Object.keys(d.days).forEach(e=>{var t=dayMap[e];t&&(document.getElementById(t).checked=d.days[e])}))}).catch(e=>{console.error("Error loading schedule:",e)}),document.querySelector("form").addEventListener("submit",function(e){e.preventDefault();e=[1,2,3].map(e=>({enabled:document.getElementById(`ft${e}_chk`).checked,hour:parseInt(document.getElementById(`ft${e}_hr`).value)||0,minute:parseInt(document.getElementById(`ft${e}_min`).value)||0,ampm:document.getElementById(`ft${e}_ampm`).value||"AM"}));let t={};Object.keys(dayMap).forEach(e=>{t[e]=document.getElementById(dayMap[e]).checked}),console.log("Saving schedule:",{feeding_times:e,days:t}),fetch("/api/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feeding_times:e,days:t})}).then(e=>e.json()).then(e=>{console.log("Save response:",e),"ok"===e.status?alert("Schedule saved!"):alert("Error saving schedule")}).catch(e=>{console.error("Error saving schedule:",e),alert("Failed to save schedule")})})})</script><div class="header"><div class="header-content"><div class="header-logo"><img src="assets/images/Header.png" alt="Fish Feeder Logo"></div><div class="header-title"><h1>Keep your Fish full</h1></div></div></div><div style="display:flex"><div class="sidebar"><b>Quick Links</b><br><a href="index.html" class="quick-link">Home</a> <a href="setschedule.html" class="quick-link">Set Feeding Schedule</a> <a href="feednow.html" class="quick-link">Feed Now !!!</a> <a href="setquantity.html" class="quick-link">Set Quantity</a></div><div style="flex:1;padding:16px"><div class="card"><div style="background:#17688a;color:#fff;padding:8px;font-weight:700">Set Feeding Schedule</div><form><div style="margin-top:12px"><div style="margin-bottom:8px;display:flex;align-items:center"><label style="margin-right:8px"><input type="checkbox" id="ft1_chk"> Feeding Time 1 :</label> <select id="ft1_hr" style="margin-right:4px"><option value="">Hr</option><script>for(let o=1;o<=12;o++)document.write(`<option value='${o}'>${o}</option>`)</script></select> <select id="ft1_min" style="margin-right:4px"><option value="">Min</option><option value="0">00</option><option value="15">15</option><option value="30">30</option><option value="45">45</option></select> <select id="ft1_ampm"><option value="">AM/PM</option><option value="AM">AM</option><option value="PM">PM</option></select></div><div style="margin-bottom:8px;display:flex;align-items:center"><label style="margin-right:8px"><input type="checkbox" id="ft2_chk"> Feeding Time 2 :</label> <select id="ft2_hr" style="margin-right:4px"><option value="">Hr</option><script>for(let o=1;o<=12;o++)document.write(`<option value='${o}'>${o}</option>`)</script></select> <select id="ft2_min" style="margin-right:4px"><option value="">Min</option><option value="0">00</option><option value="15">15</option><option value="30">30</option><option value="45">45</option></select> <select id="ft2_ampm"><option value="">AM/PM</option><option value="AM">AM</option><option value="PM">PM</option></select></div><div style="margin-bottom:8px;display:flex;align-items:center"><label style="margin-right:8px"><input type="checkbox" id="ft3_chk"> Feeding Time 3 :</label> <select id="ft3_hr" style="margin-right:4px"><option value="">Hr</option><script>for(let o=1;o<=12;o++)document.write(`<option value='${o}'>${o}</option>`)</script></select> <select id="ft3_min" style="margin-right:4px"><option value="">Min</option><option value="0">00</option><option value="15">15</option><option value="30">30</option><option value="45">45</option></select> <select id="ft3_ampm"><option value="">AM/PM</option><option value="AM">AM</option><option value="PM">PM</option></select></div><div style="padding-top:16px"><b>Select Days:</b></div><div><label style="margin-right:12px"><input type="checkbox" id="mon"> Monday</label><br><label style="margin-right:12px"><input type="checkbox" id="tue"> Tuesday</label><br><label style="margin-right:12px"><input type="checkbox" id="wed"> Wednesday</label><br><label style="margin-right:12px"><input type="checkbox" id="thu"> Thursday</label><br><label style="margin-right:12px"><input type="checkbox" id="fri"> Friday</label><br><label style="margin-right:12px"><input type="checkbox" id="sat"> Saturday</label><br><label style="margin-right:12px"><input type="checkbox" id="sun"> Sunday</label><br></div></div><div style="margin-top:16px;text-align:left"><button type="submit" class="btn">Save</button> <button type="button" class="btn" style="background:#17688a;margin-left:8px">Cancel</button></div></form></div></div></div></body></html>